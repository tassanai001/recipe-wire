# Story 1.1: Initialize Monorepo Structure

**Epic:** Epic 1 - Project Setup & Infrastructure  
**Story ID:** 1.1  
**Priority:** High  
**Estimate:** 5 Story Points  
**Sprint:** Sprint 1 (Week 1-2)

---

## Status

**Draft**

---

## Story

**As a** developer,  
**I want** a properly configured monorepo with workspace management,  
**so that** I can develop frontend and backend applications with shared packages efficiently

---

## Acceptance Criteria

1. Monorepo initialized with pnpm workspaces
2. Directory structure follows architecture specification:
   - `apps/frontend/` - Next.js application
   - `apps/backend/` - NestJS application
   - `packages/types/` - Shared TypeScript types and Zod schemas
   - `packages/utils/` - Shared utilities
   - `packages/ui/` - Shared UI components (placeholder)
3. Root `package.json` configured with workspace references
4. TypeScript configured with strict mode and path aliases
5. ESLint and Prettier configured for consistent code style
6. Git repository initialized with `.gitignore` configured

---

## Tasks / Subtasks

- [ ] **Initialize Git Repository** (AC: 6)
  - [ ] Run `git init` in project root
  - [ ] Create `.gitignore` file with Node.js, IDE, and environment file patterns
  - [ ] Add initial commit with README.md

- [ ] **Setup pnpm Workspace** (AC: 1, 3)
  - [ ] Install pnpm globally (if not installed): `npm install -g pnpm@8`
  - [ ] Create `pnpm-workspace.yaml` with workspace patterns: `apps/*`, `packages/*`
  - [ ] Create root `package.json` with workspace configuration
  - [ ] Add workspace scripts: `dev`, `build`, `test`, `lint`, `format`

- [ ] **Create Directory Structure** (AC: 2)
  - [ ] Create `apps/frontend/` directory
  - [ ] Create `apps/backend/` directory
  - [ ] Create `packages/types/` directory with basic structure
  - [ ] Create `packages/utils/` directory with basic structure
  - [ ] Create `packages/ui/` directory (placeholder for future)
  - [ ] Create `docs/`, `e2e/`, `.github/workflows/` directories

- [ ] **Configure TypeScript** (AC: 4)
  - [ ] Create root `tsconfig.json` with base configuration (strict mode enabled)
  - [ ] Configure path aliases for shared packages: `@recipe-wire/types`, `@recipe-wire/utils`, `@recipe-wire/ui`
  - [ ] Set TypeScript target to ES2022, module to ESNext
  - [ ] Create `tsconfig.json` for each workspace package

- [ ] **Configure ESLint** (AC: 5)
  - [ ] Install ESLint and TypeScript ESLint plugins
  - [ ] Create root `.eslintrc.js` with recommended rules
  - [ ] Configure rules: no-explicit-any (error), no-unused-vars (error)
  - [ ] Add ESLint ignore patterns in `.eslintignore`

- [ ] **Configure Prettier** (AC: 5)
  - [ ] Install Prettier
  - [ ] Create `.prettierrc` with project standards (semi: false, singleQuote: true, printWidth: 100)
  - [ ] Create `.prettierignore` file
  - [ ] Integrate Prettier with ESLint (eslint-config-prettier)

- [ ] **Setup Package Placeholders** (AC: 2)
  - [ ] Create `packages/types/package.json` with name `@recipe-wire/types`
  - [ ] Create `packages/types/src/index.ts` with placeholder export
  - [ ] Create `packages/utils/package.json` with name `@recipe-wire/utils`
  - [ ] Create `packages/utils/src/index.ts` with placeholder export
  - [ ] Create `packages/ui/package.json` with name `@recipe-wire/ui` (placeholder)

- [ ] **Verify Workspace Setup** (AC: 1, 3)
  - [ ] Run `pnpm install` to verify workspace configuration
  - [ ] Verify path aliases work by importing from shared packages
  - [ ] Run `pnpm lint` to verify ESLint configuration
  - [ ] Run `pnpm format` to verify Prettier configuration

---

## Dev Notes

### Previous Story Insights
- This is the first story in the project, no previous story context available

### Project Structure Overview
[Source: architecture/source-tree.md#root-structure]

The monorepo follows this structure:
```
recipe-wire/
├── apps/
│   ├── backend/     # NestJS API
│   └── frontend/    # Next.js web app
├── packages/
│   ├── types/       # Shared TypeScript types and Zod schemas
│   ├── utils/       # Shared utilities
│   └── ui/          # Shared UI components (future)
├── e2e/             # End-to-end tests (Playwright)
├── docs/            # Documentation
├── .github/         # GitHub Actions workflows
├── .gitignore
├── .eslintrc.js
├── .prettierrc
├── package.json     # Root package.json (workspaces)
├── pnpm-workspace.yaml
├── README.md
└── tsconfig.json
```

### Package Manager Configuration
[Source: architecture/tech-stack.md#pnpm-8]

**pnpm 8+** is the required package manager for this project:
- Version: 8.0.0 or later
- Provides fast, disk space efficient package management
- Strict dependency resolution (no phantom dependencies)
- Excellent monorepo support via workspaces

**pnpm-workspace.yaml configuration:**
```yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

### TypeScript Configuration
[Source: architecture/tech-stack.md#typescript-5]

**TypeScript 5+** with strict mode enabled:
```json
{
  "compilerOptions": {
    "strict": true,
    "target": "ES2022",
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "jsx": "preserve",
    "incremental": true,
    "paths": {
      "@recipe-wire/types": ["./packages/types/src"],
      "@recipe-wire/utils": ["./packages/utils/src"],
      "@recipe-wire/ui": ["./packages/ui/src"]
    }
  }
}
```

### Code Quality Tools Configuration
[Source: architecture/coding-standards.md#code-formatting]

**Prettier Configuration:**
```json
{
  "semi": false,
  "singleQuote": true,
  "trailingComma": "es5",
  "printWidth": 100,
  "tabWidth": 2,
  "arrowParens": "avoid"
}
```

**ESLint Rules:**
```json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "prettier"
  ],
  "rules": {
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/no-unused-vars": "error"
  }
}
```

### File Naming Conventions
[Source: architecture/coding-standards.md#file-naming-conventions]

- Use **kebab-case** for files and folders
- Use **PascalCase** for React components and classes
- Use **camelCase** for functions and variables
- Configuration files: `.config.ts`, `.config.js`

### Git Ignore Patterns
[Source: architecture/source-tree.md#configuration-files]

Essential patterns to include in `.gitignore`:
- `node_modules/`
- `.env`, `.env.local`, `.env.*.local`
- `dist/`, `build/`, `.next/`
- `*.log`
- `.DS_Store`
- IDE files: `.vscode/`, `.idea/`
- Test coverage: `coverage/`

### Shared Packages Structure
[Source: architecture/source-tree.md#shared-packages]

**packages/types/** - Shared TypeScript types and Zod schemas:
```
packages/types/
├── src/
│   ├── auth/
│   ├── recipe/
│   ├── review/
│   └── index.ts
├── package.json
└── tsconfig.json
```

**packages/utils/** - Shared utilities:
```
packages/utils/
├── src/
│   ├── date/
│   ├── string/
│   ├── validation/
│   └── index.ts
├── package.json
└── tsconfig.json
```

### Root Package.json Scripts
[Source: architecture/tech-stack.md#pnpm-8]

Recommended workspace scripts:
```json
{
  "scripts": {
    "dev": "pnpm --parallel -r dev",
    "build": "pnpm -r build",
    "test": "pnpm -r test",
    "lint": "pnpm -r lint",
    "format": "prettier --write \"**/*.{ts,tsx,js,jsx,json,md}\""
  }
}
```

### Testing

[Source: architecture/coding-standards.md#testing-standards]

**Test File Naming:**
- Unit tests: `*.test.ts` or `*.spec.ts`
- Integration tests: `*.integration.spec.ts`

**Test Location:**
- Backend tests: `apps/backend/test/`
- Frontend tests: Co-located with components or in `__tests__/` directory

**Testing Frameworks:**
- Backend: Jest 29+ (default for NestJS)
- Frontend: Vitest 1+ (faster than Jest)
- E2E: Playwright 1.40+

For this story, no automated tests are required as this is infrastructure setup. Manual verification of workspace configuration is sufficient.

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-30 | 1.0 | Initial story creation | Scrum Master (Bob) |

---

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent during implementation_

### Debug Log References
_To be filled by Dev Agent during implementation_

### Completion Notes List
_To be filled by Dev Agent during implementation_

### File List
_To be filled by Dev Agent during implementation_

---

## QA Results

_To be filled by QA Agent after implementation_
